<div *ngIf="channelService.showChannel" class="thread-container">

    <div class="detail-view-header"><h2>Thread {{channelService.currentThread.name}}</h2> </div>
    <div #scrollMe class="all-posts-container">
        <div class="post-container">
            <mat-icon *ngIf="generalService.adminActive" class="menu_vert_icon" mat-icon-button fontIcon="more_vert" [matMenuTriggerFor]="menuPost">
            </mat-icon>
            <mat-menu #menuPost="matMenu" xPosition="before">
                <button (click)="deletePost(channelService.currentThread.post)" mat-menu-item>
                    <mat-icon>delete_forever</mat-icon>
                    <span>Löschen</span>
                </button>            
            </mat-menu>
            <div class="post-img">
                <img [matMenuTriggerFor]="menu" #menuTrigger="matMenuTrigger"
                    (mouseenter)="getPosition($event); generalService.mouseEnter(menuTrigger)"
                    (mouseleave)="generalService.mouseLeave(menuTrigger)" class="img-small"
                    src="./../../../../assets/img/userIcons/{{(usersService.returnUsersPhotoUrl(channelService.currentThread.post.authorId)) ? usersService.returnUsersPhotoUrl(channelService.currentThread.post.authorId) : 'icon-unknown.svg'}}">
            </div>
            <mat-menu #menu="matMenu" xPosition="after" [yPosition]="menuPositionY" [hasBackdrop]="false">
                <div (mouseenter)="generalService.mouseEnter(menuTrigger)"
                    (mouseleave)="generalService.mouseLeave(menuTrigger)">
                    <app-user-window [uid]="channelService.currentThread.post.authorId"></app-user-window>
                </div>
            </mat-menu>
            <div class="post-box">
                <div class="name-time-box">
                    <div>{{usersService.returnUsersDisplayName(channelService.currentThread.post.authorId)}}</div>
                    <div>{{generalService.getTransformedTimeStampToDate(channelService.currentThread.post.timeStamp)}}
                    </div>
                </div>
                <div class="content-box" [innerHTML]="channelService.currentThread.post.content"></div>
            </div>
        </div>

        <div class="post-container" *ngFor="let answer of channelService.currentThread.post.answers">
            <mat-icon *ngIf="generalService.adminActive" class="menu_vert_icon" mat-icon-button fontIcon="more_vert" [matMenuTriggerFor]="menuPost">
            </mat-icon>
            <mat-menu #menuPost="matMenu" xPosition="before">
                <button (click)="deletePostAnswer(channelService.currentThread.post, answer.id)" mat-menu-item>
                    <mat-icon>delete_forever</mat-icon>
                    <span>Löschen</span>
                </button>            
            </mat-menu>
            <div class="post-img">
                <img [matMenuTriggerFor]="menu" #menuTrigger="matMenuTrigger"
                    (mouseenter)="getPosition($event); generalService.mouseEnter(menuTrigger)"
                    (mouseleave)="generalService.mouseLeave(menuTrigger)" class="img-small"
                    src="./../../../../assets/img/userIcons/{{(usersService.returnUsersPhotoUrl(answer.authorId)) ? usersService.returnUsersPhotoUrl(answer.authorId) : 'icon-unknown.svg'}}">
            </div>
            <mat-menu #menu="matMenu" xPosition="after" [yPosition]="menuPositionY" [hasBackdrop]="false">
                <div (mouseenter)="generalService.mouseEnter(menuTrigger)"
                    (mouseleave)="generalService.mouseLeave(menuTrigger)">
                    <app-user-window [uid]="answer.authorId"></app-user-window>
                </div>
            </mat-menu>
            <div class="post-box">
                <div class="name-time-box">
                    <div>{{usersService.returnUsersDisplayName(answer.authorId)}}</div>
                    <div>{{generalService.getTransformedTimeStampToDate(answer.timeStamp)}}
                    </div>
                </div>
                <div class="content-box" [innerHTML]="answer.content"></div>
            </div>
        </div>
    </div>
    <div class="writing-area-container">
        <div class="writing-area">
            <editor class="editor" [(ngModel)]="message" apiKey="0u347b51bx380ihx2w2vws4bfqf9dfqewelzkjxsl7p5ki0a"
                [init]="{
  height: 150,
  width: '100%',
  menubar: false, 
  plugins: 'emoticons advlist autolink lists link image charmap preview anchor',
  toolbar: 'undo redo | bold italic | emoticons',
  emoticons_database: 'emojis'
   }"></editor>
            <button (click)="sendMessage()">
                <mat-icon mat-icon-button fontIcon="send" class="color-main-with-hover"></mat-icon>
            </button>
        </div>
    </div>
</div>